<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Currency Converter - ToolHub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html"><i class="fas fa-tools me-2"></i>ToolHub</a>
        </div>
    </nav>

    <main class="container my-5">
        <div class="tool-container">
            <h1>Live Currency Converter</h1>
            <p>Get real-time exchange rates for over 150 currencies.</p>
            
            <div class="row align-items-center g-3">
                <div class="col-md-4">
                    <label for="amount" class="form-label">Amount</label>
                    <input type="number" id="amount" class="form-control" value="100">
                </div>
                <div class="col-md-3">
                    <label for="fromCurrency" class="form-label">From</label>
                    <select id="fromCurrency" class="form-select"></select>
                </div>
                <div class="col-md-2 text-center fs-2 d-none d-md-block">
                    <i class="fas fa-exchange-alt"></i>
                </div>
                <div class="col-md-3">
                    <label for="toCurrency" class="form-label">To</label>
                    <select id="toCurrency" class="form-select"></select>
                </div>
            </div>
            
            <button class="btn btn-primary mt-3" onclick="convertCurrency()">Convert</button>
            <div id="currencyResult" class="result-box mt-3 fs-5" style="display:none;"></div>
        </div>
    </main>

    <footer class="footer">
        <div class="container text-center"><p>&copy; 2025 ToolHub. All rights reserved.</p></div>
    </footer>

    <script>
        const fromSelect = document.getElementById('fromCurrency');
        const toSelect = document.getElementById('toCurrency');
        const resultDiv = document.getElementById('currencyResult');

        // Fetch currencies and populate dropdowns when the page loads
        async function populateCurrencies() {
            try {
                const response = await fetch('https://open.er-api.com/v6/latest/USD');
                const data = await response.json();
                const currencies = Object.keys(data.rates);
                
                currencies.forEach(currency => {
                    const option1 = document.createElement('option');
                    option1.value = currency;
                    option1.textContent = currency;
                    fromSelect.appendChild(option1);

                    const option2 = document.createElement('option');
                    option2.value = currency;
                    option2.textContent = currency;
                    toSelect.appendChild(option2);
                });

                // Set default values relevant to your region
                fromSelect.value = 'USD';
                toSelect.value = 'BDT';

            } catch (error) {
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = 'Could not load currency list. Please refresh.';
            }
        }

        async function convertCurrency() {
            const amount = document.getElementById('amount').value;
            const fromCurrency = fromSelect.value;
            const toCurrency = toSelect.value;
            
            if (!amount) {
                alert('Please enter an amount to convert.');
                return;
            }

            resultDiv.style.display = 'block';
            resultDiv.innerHTML = 'Converting... <i class="fas fa-spinner fa-spin"></i>';

            try {
                const response = await fetch(`https://open.er-api.com/v6/latest/${fromCurrency}`);
                const data = await response.json();

                if (data.result === 'error') {
                    throw new Error(data['error-type']);
                }

                const rate = data.rates[toCurrency];
                const convertedAmount = (amount * rate).toFixed(2);

                resultDiv.innerHTML = `<strong>${amount} ${fromCurrency} = ${convertedAmount} ${toCurrency}</strong>`;

            } catch (error) {
                resultDiv.innerHTML = `Error: Could not fetch exchange rates. Please try again later.`;
                console.error("Currency Conversion Error:", error);
            }
        }

        document.addEventListener('DOMContentLoaded', populateCurrencies);
    </script>
</body>
</html>
